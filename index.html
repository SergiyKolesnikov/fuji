<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Fuji: An Extensible Compiler for Feature-Oriented Programming in Java</title>
    <link href="ar.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <STYLE>H1 {FONT-SIZE: 27pt}</STYLE>
    <a href="https://github.com/SergiyKolesnikov/fuji"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
    <a href="https://sergiykolesnikov.github.io/fuji/"><img style="width: 240px; height: 76px; float:
						  left; border: none;" border=0 alt="Fuji Logo" src="images/fuji.png"></a>
    <h1 align="center">Fuji: An Extensible Compiler for <br />Feature-Oriented Programming in Java</h1>
    <br><br>
    <div id="nav">
      <div class="link"><a href="#intro">Overview</a></div>
      <div class="link"><a href="#example">Background</a></div>
      <div class="link"><a href="#howto">HowTo</a></div>
      <div class="link"><a href="#typechecker">Type Checker</a></div>
      <div class="link"><a href="#download">Download</a></div>
      <div class="link"><a href="#contact">Contact</a></div>
      <p align="center">

	<br/><br/><br/><br/>

	<A HREF="http://www.uni-passau.de/index.php?id=6&L=1"><IMG ALT="Uni Logo" WIDTH="216" HEIGHT="57" BORDER="0" SRC="./images/unilogo.gif"/></A>

	<br><br>

	<A HREF="http://www.fim.uni-passau.de/en"><IMG ALT="FIM" WIDTH="187" HEIGHT="80"
						       BORDER="0" SRC="./images/fimlogo_eng.gif"/></A>

	<br><br>

	<A HREF="http://www.infosun.fim.uni-passau.de/se/index.php"><IMG ALT="Chair of Software Engineering" WIDTH="206" HEIGHT="72" BORDER="0" SRC="./images/SEGroup.png"/></A>
    </p></div>

    <div class="con">
      <h2><a name="intro" id="introduction"></a>Overview</h2>
      <p><em>Feature-oriented programming</em> aims at the modularization of features
	in source code. A <em>feature</em> is a unit of functionality of a software
	system that satisfies a requirement, represents a design decision, and provides
	a potential configuration option. Implementing a feature on top of a base
	program involves the addition of new program elements and the extension and
	refinement of existing program elements. For example, the implementation of a
	transaction feature on top of a database system requires the addition of new
	program structures for representing transactions as well as the integration of
	transaction management code into the core database system. For more information
	on feature orientation we refer the interested reader to
	a <a href="http://www.infosun.fim.uni-passau.de/cl/publications/docs/JOT2009fosd.pdf"
	     target="_blank">survey paper</a>.
      </p>

      <p>
	<em>Fuji</em> is an extensible compiler that supports feature-oriented programming in Java.
	In contrast to other feature-oriented tools (e.g., the
	<a href="http://userweb.cs.utexas.edu/users/schwartz/ATS.html" target="_blank">
	  AHEAD Tool Suite</a> and <a href="http://www.fosd.de/fh" target="_blank">
	  FeatureHouse</a>), Fuji does not rely on a source-to-source transformation but
	is a fully-fledged compiler that produces standard Java bytecode. Technically,
	Fuji is based on the <a href="http://jastadd.org/web/extendj/"
				target="_blank">JastAdd Extensible Java Compiler</a> and supports the full Java 7 standard.
      </p>
    </div>

    <div class="con">
      <h2><a name="example"></a>Background</h2> We illustrate the basic capabilities
      of Fuji by means of an example. It is not meant as a comprehensive tutorial, but
      merely as a start-off aid. For an introduction to feature-oriented programming
      we refer the reader to the websites of
      the <a href="http://userweb.cs.utexas.edu/users/schwartz/ATS.html"
	     target="_blank">AHEAD Tool Suite</a> and <a href="http://www.fosd.de/fh"
							 target="_blank">FeatureHouse</a>.

      <h4>Containment Hierarchies</h4>
      <p>
	Fuji follows the tradition of feature orientation to represent features as
	containment hierarchies, which are technically realized by file system
	directories. The files found inside a containment hierachy belong to the
	corresponding feature. For example, to implement a simple graph library that
	consists of the two features <em>BasicGraph</em> and <em>Weight</em>, a
	programmer creates two directories, each of which contains the files that belong
	to the feature in question:
      </p>
      <img border="0" src="./images/Graph.png">
      <br><br>
      <p>
	A feature may contain standard Java packages, interfaces, and classes. For
	example, feature <em>BasicGraph</em> contains the three
	classes <code>Node</code>, <code>Edge</code>, and <code>Graph</code>:
	<div class="code"> /* BasicGraph/Graph/Node.java */<br> package Graph;<br> class
	  Node {<br> &nbsp;&nbsp;int id = 0;<br> &nbsp;&nbsp;Node(int _id) {<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;id = _id;<br> &nbsp;&nbsp;}<br> }
	</div><br>
	<div class="code"> /* BasicGraph/Graph/Edge.java */<br> package Graph;<br> class
	  Edge {<br> &nbsp;&nbsp;Node a, b;<br> &nbsp;&nbsp;Edge(Node _a, Node _b) {<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;a = _a; b = _b;<br> &nbsp;&nbsp;}<br> }
	</div><br>
	<div class="code"> /* BasicGraph/Graph/Graph.java */<br> package Graph;<br>
	  class Graph {<br> &nbsp;&nbsp;java.util.Vector nodes = new
	  java.util.Vector();<br> &nbsp;&nbsp;java.util.Vector edges = new
	  java.util.Vector();<br> &nbsp;&nbsp;Edge add(Node n, Node m) {<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;Edge e = new Edge(n, m);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;nodes.add(n); nodes.add(m); edges.add(e);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;return e;<br> &nbsp;&nbsp;}<br> }
	</div>
      </p>

      <h4>Class Refinement</h4>
      <p>
	Furthermore, Fuji supports the concept of class refinement. That is, when a
	feature is composed with another feature, it may refine the classes of the other
	feature. For example, to implement feature <em>Weight</em>, we add a new
	class <code>Weight</code> representing edge weights and we refine class Edge
	such that each <code>Edge</code> object has a field <code>weight</code>.  
	Furthermore we refine class Graph by appending a new <code>add</code> method 
	that allows to add weighted edges to a graph:</p>
      <div class="code">
	/* Weight/Graph/Weight.java */<br> package Graph;<br> class Weight {<br>
	&nbsp;&nbsp;int w = 0;<br> &nbsp;&nbsp;Weight(int _w) {<br>
	&nbsp;&nbsp;&nbsp;&nbsp;w = _w;<br> &nbsp;&nbsp;}<br> }
      </div><br>
      <div class="code"> /* Weight/Graph/Edge.java */<br> package Graph;<br>
	class Edge {<br> &nbsp;&nbsp;Weight w = new Weight(0);<br> &nbsp;&nbsp;void
	setWeight(Weight _w) {<br> &nbsp;&nbsp;&nbsp;&nbsp;w = _w;<br>
	&nbsp;&nbsp;}<br> }
      </div><br>
      <div class="code">/* Weight/Graph/Graph.java */<br>
	package Graph;<br>
	class Graph {<br>
	&nbsp;&nbsp;Edge add(Node n, Node m, Weight w) {<br>
	&nbsp;&nbsp;&nbsp;&nbsp;Edge res = this.add(n, m);<br>
	&nbsp;&nbsp;&nbsp;&nbsp;res.setWeight(w);<br>
	&nbsp;&nbsp;&nbsp;&nbsp;return res;<br>
	&nbsp;&nbsp;}<br>
	}
      </div>

      <p>
	Technically, the composition of features and refinement of classes are
	implemented via superimposition. For more details, we refer the interested
	reader to the <a href="http://www.fosd.de/fh" target="_blank">FeatureHouse</a>
	website.
      </p>

      <h4>Access Control Mechanisms</h4>
      <p>
	Fuji is fully compatible with <a href="http://www.fosd.de/fh"
					 target="_blank">FeatureHouse</a>. Additionally, it implements a novel access
	control model for feature-oriented programming. It provides three new
	modifiers <code>feature</code>, <code>subsequent</code>,
	and <code>program</code> for class members. The semantics of the modifiers and
	the details of the model are described in
	a <a href="http://www.infosun.fim.uni-passau.de/cl/publications/docs/SCP_FOSD2012.pdf" target="_blank">scientific paper</a>.  We provide two versions of Fuji: one with and one without the novel access control model.
      </p>
    </div>

    <div class="con">
      <h2><a name="howto"></a>HowTo</h2>
      <p>Fuji is deployed in the form of a single Jar archive. As command line
	arguments, it expects a file that lists the features to be composed. The
	features listed in the file must be implemented by corresponding containment
	hierarchies reachable from the working directory.</p>
      <p>To try out the graph example we described above, download the example
	programs and compile Fuji first.  We assume that Fuji
	Jar archive is in the <code>Graph</code> directory (the root directory of the
	example). Then invoke Fuji as follows:</p>
      <div class="code">
	cd Graph<br> java -jar fuji.jar -d classes GraphComp.features
      </div> 
      <p>The file <code>GraphComp.features</code> lists the two features we
	want to compose:</p>
      <div class="code">
	BasicGraph<br>
	Weight
      </div>
      <p>The generated class files will be put in the <code>classes</code> sub-directory.  To invoke the compiled program run:</p>
      <div class="code">
	java -cp classes Graph.Graph
      </div>
    </div>

    <div class="con">
      <h2 id="typechecker">Type Checker</h2>
      <p> Fuji type checker implements product-based, feature-based, and
	family-based typechecking strategies.</p>

      <h2><a name="typechecker"></a>HowTo</h2>
	<p>To perform a family-based type check, run in the command line:</p>
	<div class="code">
	  java -jar fuji.jar -timer -fopRefs -typechecker Lists.family.model
	</div>
	<p>To perform a feature-based type check, run in the command line:</p>
	<div class="code">
	  java -jar fuji.jar -timer -fopRefs -typechecker -novariability -ignoreOriginal Lists.Base-feature.model
	  <br/>
	  java -jar fuji.jar -timer -fopRefs -typechecker -novariability -ignoreOriginal Lists.Batch-feature.model
	</div>
	<p>To perform a product-based type check, run in the command line:</p>
	<div class="code">
	  java -jar fuji.jar -timer -fopRefs -typechecker -novariability Lists.Base-product.model
	  <br/>
	  java -jar fuji.jar -timer -fopRefs -typechecker -novariability Lists.Base-Batch-product.model
	</div>

	<p>You can use the same procedure to type check the 12 subject systems from the Fuji collection.
	Alternatively, you can use the scripts from the complete project data.</p>

	<p>We empirically compared the three typechecking strategies and presented the results in
	a <a href="http://www.infosun.fim.uni-passau.de/publications/docs/GPCE2013fuji.pdf" target="_blank">scientific paper.</a></p>
</div>

<div class="con">
  <h2><a name="download" id="download"></a>Download</h2>
  <p><a href="https://github.com/SergiyKolesnikov/fuji">Git repository.</a></p>
</div>

<div class="con">
  <h2><a name="contact" id="contact"></a>Contact</h2>
  <p>Fuji has been developed at the University of Passau, Germany. For more
    information please contact the developers:</p>
  <ul>
    <li><a href="https://github.com/SergiyKolesnikov">Sergiy
	Kolesnikov</a></li>
    <li><a href="http://www.infosun.fim.uni-passau.de/cl/staff/apel/"
	   target="_blank">Sven Apel</a> (University of Passau, Germany)</li>
  </ul>
</div>

<div class="end"></div>
</body>
</html>
